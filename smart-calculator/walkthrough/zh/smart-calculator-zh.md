# æ™ºèƒ½è®¡ç®—å™¨åˆçº¦

Day: Day 9
ID: 9
åŸæ–‡: https://builder-hub.notion.site/Smart-Calculator-1d05720a23ef803a86e3e16d534b51ab
çŠ¶æ€: å®Œæˆ
è¯‘è€…: ç¦¾
éš¾åº¦ç­‰çº§: åˆçº§

[ğŸ§­ é¦–é¡µ](https://www.notion.so/5-5-HerSolidity-28e06421268880e4b645d9458179e231?pvs=21) ï½œ [ğŸ“ 30å¤©è¯¾ç¨‹æ—¥å†](https://www.notion.so/28e0642126888002b26be4b2e9841ce0?pvs=21) ï½œ[](https://www.notion.so/28e06421268881e59a00e854a7444215?pvs=21) ï½œ[FAQ-Solidityç­”ç–‘é—®é¢˜åº“](https://www.notion.so/2910642126888046a897d75705d86a58?pvs=21) ï½œ [ğŸ‘©ğŸ»â€ğŸ’» å…³äºæˆ‘ä»¬](https://www.notion.so/344d3328efef4b3ab742f92b61533ce8?pvs=21)

# ä»Šæ—¥å­¦ä¹ å†…å®¹ï¼š

å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ Solidity ç¼–å†™ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨ã€‚ä½ å¸Œæœ›å®ƒèƒ½å¤„ç†åŸºæœ¬çš„æ•°å­¦è¿ç®—â€”â€”åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ã€‚
ä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼Œç›´åˆ°ä¸€ä¸ªç”¨æˆ·è¯´ï¼š

> â€œå˜¿ï¼Œè¿™ä¸ªä¹Ÿèƒ½è®¡ç®—å¹³æ–¹æ ¹å—ï¼Ÿæˆ–è€…èƒ½å°†æ•°å­—æå‡åˆ°å¹‚æ¬¡æ–¹å—ï¼Ÿâ€
> 

ä½ å¯ä»¥æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ‰”åˆ°ä¸€ä¸ªå·¨å¤§çš„åˆçº¦é‡Œâ€¦
ä½†æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼š åˆ†è§£è´£ä»»ã€‚
ä¸€ä¸ªåˆçº¦å¤„ç†åŸºç¡€éƒ¨åˆ†ã€‚
å¦ä¸€ä¸ªåˆçº¦å¤„ç†é«˜çº§åŠŸèƒ½â€”â€”æ¯”å¦‚å¹‚è¿ç®—å’Œå¹³æ–¹æ ¹ã€‚
ç„¶åï¼Œæˆ‘ä»¬å°†è®©å®ƒä»¬ **ç›¸äº’é€šä¿¡** ã€‚

# 1. äº§å“éœ€æ±‚ä¹¦

1. ç”¨æˆ·è·¯å¾„å›¾/ åˆçº¦æµç¨‹å›¾ï¼ˆMermaidï¼‰
    
    ```mermaid
    graph TD
      ç”¨æˆ·[/ç”¨æˆ·æäº¤è¯·æ±‚/] -->|åŸºç¡€è¿ç®—: åŠ /å‡/ä¹˜/é™¤| Calc[Calculator åˆçº¦]
      ç”¨æˆ· -->|é«˜çº§è¿ç®—: å¹‚/å¹³æ–¹æ ¹| Calc
      Owner[æ‰€æœ‰è€… Owner] -->|è®¾ç½®ç§‘å­¦è®¡ç®—å™¨åœ°å€| SetAddr["setScientificCalculator(address)"]
      SetAddr --> AddrSaved[(scientificCalculatorAddress å·²ä¿å­˜)]
    
      Calc -->|æœ¬åœ°æ‰§è¡Œ| Local["åŠ æ³• / å‡æ³• / ä¹˜æ³• / é™¤æ³•"]
      Calc -->|å§”æ‰˜è°ƒç”¨| Sci[ScientificCalculator åˆçº¦]
      Sci -->|power base, exponent| Pow["å¹‚è¿ç®—"]
      Sci -->|squareRoot number| Sqrt["å¹³æ–¹æ ¹è¿‘ä¼¼"]
    
      Calc -->|è¿”å›ç»“æœ| ç”¨æˆ·
    
    ```
    
    b. æ•°æ®åº“ç»“æ„è¡¨
    
    ## åˆçº¦ä¸å‡½æ•°æ¸…å•ï¼ˆè¡¨æ ¼ï¼‰
    
    | Contract | Function Name | Visibility | Mutability |
    | --- | --- | --- | --- |
    | ScientificCalculator | power(uint256 base, uint256 exponent) | Public | pure |
    | ScientificCalculator | squareRoot(uint256 number) | Public | pure |
    | Calculator | constructor() | Public | nonpayable |
    | Calculator | setScientificCalculator(address _address) | Public | nonpayable |
    | Calculator | add(uint256 a, uint256 b) | Public | pure |
    | Calculator | subtract(uint256 a, uint256 b) | Public | pure |
    | Calculator | multiply(uint256 a, uint256 b) | Public | pure |
    | Calculator | divide(uint256 a, uint256 b) | Public | pure |
    | Calculator | calculatePower(uint256 base, uint256 exponent) | Public | view |
    | Calculator | calculateSquareRoot(uint256 number) | Public | nonpayable |

# 2. ç»†èŠ‚è§£è¯´

è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥æ„å»ºã€‚

---

## **è®¡åˆ’ï¼šä¸¤ä¸ªåˆçº¦ï¼Œä¸¤ä¸ªæ–‡ä»¶**

æˆ‘ä»¬å°†æ„å»ºä¸¤ä¸ªååŒå·¥ä½œçš„æ™ºèƒ½åˆçº¦ï¼š

1. **`Calculator.sol`** â€“ è¿™å°†æ˜¯æˆ‘ä»¬ä¸»è¦çš„è®¡ç®—å™¨ã€‚å®ƒå¤„ç†åŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ç­‰åŸºæœ¬æ•°å­¦è¿ç®—ã€‚å½“å®ƒéœ€è¦æ›´é«˜çº§çš„æ•°å­¦è¿ç®—å¸®åŠ©æ—¶ï¼Œå®ƒä¼šå°†ä»»åŠ¡å§”æ‰˜å‡ºå»ã€‚
2. **`ScientificCalculator.sol`** â€“ è¿™ä¸ªåˆçº¦å°†å­˜æ”¾é«˜çº§åŠŸèƒ½â€”â€”æ¯”å¦‚æŒ‡æ•°è¿ç®—ï¼ˆå¹‚è¿ç®—ï¼‰å’Œå¹³æ–¹æ ¹è®¡ç®—ã€‚

æ¯ä¸ªåˆçº¦å°†å­˜åœ¨äºå®ƒè‡ªå·±çš„  **ç‹¬ç«‹æ–‡ä»¶**  ä¸­ï¼Œä½†å®ƒä»¬ä¼šç›¸äº’è¿æ¥ã€‚

<aside>
ğŸ’»

ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç  ğŸ‘‡ğŸ¼
1ï¸âƒ£ Calculator.sol : 

[https://github.com/snehasharma76/30daysSolidity_Web3Compass/blob/master/Calculator.sol](https://github.com/snehasharma76/30daysSolidity_Web3Compass/blob/master/Calculator.sol)

2ï¸âƒ£ ScientificCalculator.sol : 

[https://github.com/snehasharma76/30daysSolidity_Web3Compass/blob/master/ScientificCalculator.sol](https://github.com/snehasharma76/30daysSolidity_Web3Compass/blob/master/ScientificCalculator.sol)

</aside>

ä¸ºäº†ä» `ScientificCalculator` ä¸­è°ƒç”¨å‡½æ•°ï¼Œåœ¨ `Calculator` åˆçº¦å†…ï¼Œæˆ‘ä»¬å°† **å¯¼å…¥ï¼ˆimportï¼‰**å®ƒå¹¶å­˜å‚¨å…¶éƒ¨ç½²åœ°å€ã€‚

> âš ï¸é‡è¦æç¤ºï¼šè¯·å°†ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œä»¥ç¡®ä¿å¯¼å…¥æ—¶ä¸ä¼šå‡ºç°é—®é¢˜ã€‚
> 

---

[âš ï¸](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

## **è¿™äº›æ–‡ä»¶çœ‹èµ·æ¥æ˜¯æ€æ ·çš„ï¼Ÿ**

åœ¨æ·±å…¥ç¼–å†™é€»è¾‘ä¹‹å‰ï¼Œä»¥ä¸‹æ˜¯æ¯ä¸ªæ–‡ä»¶çš„åŸºæœ¬ç»“æ„â€”â€”æˆ–ç§°ä¸º"å¤–å£³"â€”â€”çš„æ ·å­ï¼š

### **File 1: `ScientificCalculator.sol`**

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract ScientificCalculator {
    // advanced functions will go here
}
```

è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å¤„ç†å¹‚å’Œå¹³æ–¹æ ¹çš„åè®®â€”â€”æ‰€æœ‰è¶…å‡ºåŸºç¡€èŒƒå›´çš„æ‰€æœ‰æ•°å­¦è¿ç®—ã€‚

---

### **File 2: `Calculator.sol`**

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "./ScientificCalculator.sol";

contract Calculator {
    // basic math functions}
```

è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸»è¦çš„ `Calculator` åˆçº¦ã€‚å®ƒåŒ…æ‹¬ï¼š

- åŸºæœ¬ç®—æœ¯åŠŸèƒ½

ç»“æ„å·²å°±ç»ªï¼Œç°åœ¨è®©æˆ‘ä»¬è¿›å…¥ `ScientificCalculator` å¹¶å¼€å§‹é€ä¸€æ„å»ºå®ƒã€‚

## **ç§‘å­¦è®¡ç®—å™¨â€”â€”ä»é«˜çº§æ•°å­¦å¼€å§‹**

æˆ‘ä»¬å°†ä»å¤„ç†é«˜çº§æ“ä½œçš„åˆçº¦å¼€å§‹â€”â€”`ScientificCalculator`ã€‚

è¿™æ˜¯æ–‡ä»¶çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;
```

è¿™æ˜¯æ¯ä¸ª Solidity æ–‡ä»¶é¡¶éƒ¨çš„æ ‡å‡†å£°æ˜ã€‚å®ƒä»¬ç¡®ä¿ä½ çš„åˆçº¦èƒ½å¤Ÿæ­£ç¡®ç¼–è¯‘å¹¶åˆæ³•ä½¿ç”¨ã€‚

ç°åœ¨è®©æˆ‘ä»¬å®šä¹‰æˆ‘ä»¬çš„åˆçº¦ï¼š

```solidity
contract ScientificCalculator {
```

æˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªåä¸º `ScientificCalculator` çš„æ–°åˆçº¦ã€‚åœ¨è¿™ä¸ªåˆçº¦ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆç¼–å†™ä¸€ä¸ªç”¨äºè®¡ç®—å¹‚çš„å‡½æ•°ã€‚

### **power(base, exponent)**

```solidity
function power(uint256 base, uint256 exponent) public pure returns (uint256) {
    if (exponent == 0) return 1;
    else return (base ** exponent);
}
```

æ­¤å‡½æ•°è¿”å› `base` çš„ `exponent` æ¬¡å¹‚çš„ç»“æœï¼ˆæ­¤å‡½æ•°è¿”å›å°†åº•æ•°æå‡åˆ°æŒ‡æ•°æ¬¡å¹‚çš„ç»“æœï¼‰ã€‚

- å¦‚æœæŒ‡æ•°ä¸º0ï¼Œå®ƒè¿”å›1â€”â€”è¿™åªæ˜¯æ ‡å‡†æ•°å­¦ã€‚
- å¦åˆ™ï¼Œå®ƒä½¿ç”¨ Solidity çš„ `*` è¿ç®—ç¬¦æ¥è®¡ç®— `base` çš„ `exponent` æ¬¡æ–¹ã€‚
- å®ƒè¢«æ ‡è®°ä¸º `pure`ï¼Œå› ä¸ºå®ƒä¸è¯»å–æˆ–æ›´æ”¹åŒºå—é“¾ä¸Šçš„ä»»ä½•å†…å®¹ã€‚å®ƒåªæ˜¯è¿›è¡Œæ•°å­¦è¿ç®—ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªå‡½æ•°æ¥ä¼°ç®—å¹³æ–¹æ ¹ã€‚

---

### **squareRoot(number)**

```solidity
function squareRoot(uint256 number) public pure returns (uint256) {
    require(number >= 0, "Cannot calculate square root of negative number");
    if (number == 0) return 0;

    int256 result = number / 2;
    for (uint256 i = 0; i < 10; i++) {
        result = (result + number / result) / 2;
    }
    return result;
}
```

è¿™ä¸ªå‡½æ•°ä½¿ç”¨ä¸€ç§ç»å…¸çš„æŠ€æœ¯â€”â€” **ç‰›é¡¿æ³•**æ¥ä¼°ç®—ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹ï¼Œè¿™æ˜¯ä¸€ç§é€šè¿‡é‡å¤é€¼è¿‘æ¥æ‰¾åˆ°å¹³æ–¹æ ¹çš„èªæ˜æ–¹æ³•ã€‚

è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥åˆ†è§£ï¼š

- é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ `require` æ£€æŸ¥è¾“å…¥çš„æ•°å­—æ˜¯å¦ä¸ºè´Ÿæ•°ã€‚Solidity ä¸æ”¯æŒå¤æ•°ï¼Œå› æ­¤è´Ÿæ•°çš„å¹³æ–¹æ ¹æ˜¯ä¸è¢«å…è®¸çš„ã€‚
- ç„¶åæˆ‘ä»¬å¤„ç†ä¸€ä¸ªå¿«é€Ÿçš„ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœè¿™ä¸ªæ•°æ˜¯0ï¼Œé‚£ä¹ˆå®ƒçš„å¹³æ–¹æ ¹ä¹Ÿæ˜¯0â€”â€”æ‰€ä»¥æˆ‘ä»¬ä¼šç«‹å³è¿”å›è¿™ä¸ªç»“æœã€‚
- ç°åœ¨è¿›è¡Œå®é™…è¿‘ä¼¼ã€‚æˆ‘ä»¬ä»å°†æ•°å­—é™¤ä»¥äºŒå¼€å§‹è¿›è¡Œ**ç²—ç•¥ä¼°è®¡** ï¼š
    
    `uint256 result = number / 2;`
    
- æˆ‘ä»¬æ¥ç€ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å…¬å¼å°†é‚£ä¸ªçŒœæµ‹å€¼è¿›è¡Œ**åæ¬¡ç²¾ç‚¼** ï¼š
    
    `(result + number / result) / 2`
    
    è¿™ä¸ªå…¬å¼é€šè¿‡ç»“åˆå½“å‰çš„çŒœæµ‹å€¼ä¸å¦‚æœçŒœæµ‹å€¼å®Œç¾æ—¶æˆ‘ä»¬å¾—åˆ°çš„ç»“æœï¼Œå¹¶å°†å®ƒä»¬å–å¹³å‡å€¼æ¥å·¥ä½œã€‚æ¯æ¬¡å¾ªç¯éƒ½ä½¿æˆ‘ä»¬å¯ä»¥æ›´æ¥è¿‘å®é™…çš„å¹³æ–¹æ ¹ã€‚
    

å°½ç®¡æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨æµ®ç‚¹æ•°è®¡ç®—ï¼Œä½†è¿™ç§æ–¹æ³•å¯¹äºæ•´æ•°ä»ç„¶èƒ½ç»™å‡ºç›¸å½“ä¸é”™çš„ä¼°è®¡â€”â€”è¶³å¤Ÿæ»¡è¶³ Solidity ä¸­è®¸å¤šå®é™…åº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚

---

## **è®¡ç®—å™¨â€”â€”ä¸»è¦æ•°å­¦å¼•æ“ï¼ˆé™„å¸¦ä¸€äº›è¾…åŠ©åŠŸèƒ½ï¼‰**

è¿™ä»½åˆåŒå¤„ç†åŸºæœ¬çš„æ•°å­¦è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•å’Œé™¤æ³•ã€‚ä½†å½“äº‹æƒ…å˜å¾—æ›´å¤æ‚æ—¶â€”â€”æ¯”å¦‚è®¡ç®—å¹‚æˆ–å¹³æ–¹æ ¹â€”â€”å®ƒå¹¶ä¸èƒ½å®Œå…¨ç‹¬ç«‹å®Œæˆæ‰€æœ‰æ“ä½œã€‚

ç›¸åï¼Œå®ƒå‘ `ScientificCalculator` åˆçº¦å¯»æ±‚å¸®åŠ©ã€‚

è®©æˆ‘ä»¬ä»æ–‡ä»¶é¡¶éƒ¨å¼€å§‹ï¼š

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "./ScientificCalculator.sol";
```

è¿™æ˜¯å‘ç”Ÿçš„æƒ…å†µï¼š

æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª `import` è¯­å¥å°† `ScientificCalculator.sol` ä¸­çš„ä»£ç å¼•å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚è¿™å…è®¸ `Calculator` åˆçº¦ä½¿ç”¨é‚£ä¸ªå…¶ä»–åˆçº¦ä¸­çš„å‡½æ•°ã€‚

`"./"` éƒ¨åˆ†å‘Šè¯‰ Solidityï¼š

> â€œæŸ¥çœ‹ä¸è¿™ä¸ªæ–‡ä»¶ç›¸åŒçš„ç›®å½•ï¼ˆæˆ–æ–‡ä»¶å¤¹ï¼‰ä¸­ï¼Œæ‰¾åˆ° ScientificCalculator.solã€‚â€
> 

å› æ­¤ï¼Œä¸ºäº†è®©è¿™ä¸ªå¯¼å…¥æ­£å¸¸å·¥ä½œï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶â€”â€”`Calculator.sol` å’Œ `ScientificCalculator.sol`â€”â€” **å¿…é¡»ä¿å­˜åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­** ã€‚

è¿™ç§è®¾ç½®å…è®¸ä¸€ä¸ªåˆçº¦çŸ¥é“å¹¶ä¸å…¶ä»–åˆçº¦äº¤äº’ã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¼€å§‹æ„å»ºå‰©ä½™çš„`Calculator`åˆçº¦ã€‚æˆ‘ä»¬å°†ä»å£°æ˜åˆçº¦æœ¬èº«å’Œè®¾ç½®å‡ ä¸ªé‡è¦å˜é‡å¼€å§‹ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å£°æ˜åˆçº¦ï¼š

```solidity
contract Calculator {
```

åœ¨åˆçº¦å†…éƒ¨ï¼Œè®©æˆ‘ä»¬å®šä¹‰å‡ ä¸ª**çŠ¶æ€å˜é‡**æ¥å­˜å‚¨æœ‰ç”¨ä¿¡æ¯ã€‚

---

### **çŠ¶æ€å˜é‡**

```solidity
address public owner;
address public scientificCalculatorAddress;
```

- `owner` å°†å­˜å‚¨éƒ¨ç½²æ­¤åˆçº¦çš„åœ°å€ã€‚
- `scientificCalculatorAddress` æ˜¯æˆ‘ä»¬å­˜æ”¾å·²éƒ¨ç½²çš„ `ScientificCalculator` åœ°å€çš„åœ°æ–¹ã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨éƒ¨ç½²æ—¶è®¾ç½® ownerã€‚

---

### **constructor()**

```solidity
constructor() {
    owner = msg.sender;
}
```

å½“æœ‰äººéƒ¨ç½²è¿™ä¸ªåˆçº¦æ—¶ï¼Œä»–ä»¬çš„åœ°å€è¢«å­˜å‚¨ä¸º  æ‰€æœ‰è€… ã€‚

æˆ‘ä»¬ç¨åä¼šç”¨è¿™ä¸ªæ¥é™åˆ¶æŸäº›åŠŸèƒ½ã€‚

---

### **onlyOwner ä¿®é¥°ç¬¦**

```solidity
modifier onlyOwner() {
    require(msg.sender == owner, "Only owner can perform this action");
    _;
}
```

è¿™æ˜¯ä¸€ä¸ª  **ä¿®é¥°ç¬¦** ï¼Œå°±åƒä¸€ä¸ªå¯é‡å¤ä½¿ç”¨çš„çœ‹é—¨äººã€‚

ä»»ä½•ä½¿ç”¨ onlyOwner çš„å‡½æ•°åªèƒ½è¢«åˆçº¦çš„åŸå§‹éƒ¨ç½²è€…è°ƒç”¨ã€‚

ç°åœ¨æˆ‘ä»¬ç”¨å®ƒæ¥å…è®¸æ‰€æœ‰è€…é“¾æ¥ä¸€ä¸ª ScientificCalculatorã€‚

---

### **setScientificCalculator(address)**

```solidity
function setScientificCalculator(address _address) public onlyOwner {
    scientificCalculatorAddress = _address;
}
```

ä¸€æ—¦æ‚¨çš„ ScientificCalculator åˆçº¦éƒ¨ç½²å®Œæˆï¼Œæ‚¨å¯ä»¥å°†å®ƒçš„åœ°å€å¤åˆ¶å¹¶ç²˜è´´åˆ°è¿™é‡Œã€‚è¿™ä¸ªå‡½æ•°ä¼šä¿å­˜è¯¥åœ°å€ï¼Œä»¥ä¾¿æˆ‘ä»¬ä¹‹åå¯ä»¥è°ƒç”¨å®ƒçš„å‡½æ•°ã€‚

---

## **åŸºç¡€æ•°å­¦å‡½æ•°**

ç°åœ¨æˆ‘ä»¬æ¥å®šä¹‰ä¸€äº›åŸºæœ¬çš„ç®—æœ¯è¿ç®—ã€‚è¿™äº›éƒ½æ˜¯ `pure` å‡½æ•°â€”â€”å®ƒä»¬ä¸ä¼šè§¦åŠåŒºå—é“¾çŠ¶æ€ï¼Œåªæ˜¯è¿”å›ç»“æœã€‚

---

### **add(a, b)**

```solidity
function add(uint256 a, uint256 b) public pure returns (uint256) {
    uint256 result = a + b;
    return result;
}
```

ç®€å•çš„åŠ æ³•ã€‚æ¥å—ä¸¤ä¸ªæ•°å­—å¹¶è¿”å›å®ƒä»¬çš„å’Œã€‚

---

### **subtract(a, b)**

```solidity
function subtract(uint256 a, uint256 b) public pure returns (uint256) {
    uint256 result = a - b;
    return result;
}
```

ä» `a` ä¸­å‡å» `b` å¹¶è¿”å›ç»“æœã€‚

---

### **multiply(a, b)**

```solidity
function multiply(uint256 a, uint256 b) public pure returns (uint256) {
    uint256 result = a * b;
    return result;
}
```

å°†ä¸¤ä¸ªæ•°å­—ç›¸ä¹˜ã€‚

---

### **divide(a, b)**

```solidity
function divide(uint256 a, uint256 b) public pure returns (uint256) {
    require(b != 0, "Cannot divide by zero");
    uint256 result = a / b;
    return result;
}
```

å°† `a` é™¤ä»¥ `b`ã€‚ä½†åœ¨æ‰§è¡Œä¹‹å‰ï¼Œå®ƒä¼šæ£€æŸ¥ `b` æ˜¯å¦ä¸ºé›¶â€”â€”åªæ˜¯ä¸ºäº†é¿å…é”™è¯¯ã€‚

---

## **è¿æ¥åˆ°å¦ä¸€ä¸ªåˆçº¦ï¼šå¹‚å‡½æ•°**

ç°åœ¨äº‹æƒ…å˜å¾—çœŸæ­£æœ‰è¶£äº†â€”â€”æˆ‘ä»¬å°†è®©ä¸€ä¸ªæ™ºèƒ½åˆçº¦  **ä¸å¦ä¸€ä¸ªåˆçº¦é€šä¿¡** ã€‚

è®©æˆ‘ä»¬å‡è®¾ç”¨æˆ·æƒ³è¦è®¡ç®—ç±»ä¼¼ `5 to the power of 3` (5 çš„ 3 æ¬¡æ–¹)  è¿™æ ·çš„å†…å®¹ã€‚åŸºæœ¬çš„`Calculator` åˆçº¦ä¸çŸ¥é“å¦‚ä½•å¤„ç†â€”â€”ä½† `ScientificCalculator` å¯ä»¥ã€‚

ä¸å…¶å†æ¬¡é‡å†™é‚£æ®µé€»è¾‘ï¼Œæˆ‘ä»¬å°†è°ƒç”¨å…¶ä»–åˆçº¦ä¸­çš„ **`power()` å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœã€‚**

### `calculatePower(base, exponent)`

```solidity
function calculatePower(uint256 base, uint256 exponent) public view returns (uint256) {
    ScientificCalculator scientificCalc = ScientificCalculator(scientificCalculatorAddress);
    uint256 result = scientificCalc.power(base, exponent);
    return result;
}
```

è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥è§£æã€‚

---

### **ç¬¬ä¸€æ­¥ï¼šåœ°å€è½¬æ¢**

```solidity
ScientificCalculator scientificCalc = ScientificCalculator(scientificCalculatorAddress);
```

è¿™ä¸€è¡Œæ­£åœ¨åšä¸€ä»¶éå¸¸é‡è¦çš„äº‹æƒ…ã€‚å®ƒå°†ä¸€ä¸ªæ™®é€šçš„ä»¥å¤ªåŠåœ°å€ï¼ˆ`scientificCalculatorAddress`ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯ç”¨çš„åˆçº¦å¯¹è±¡â€”â€”åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ˜¯ä¸€ä¸ª `ScientificCalculator`ã€‚

ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š

> â€œSolidityï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåŒºå—é“¾ä¸Šçš„åœ°å€ã€‚æˆ‘çŸ¥é“å®ƒæŒ‡å‘ä¸€ä¸ª ScientificCalculator åˆçº¦ã€‚è¯·æŠŠå®ƒå½“ä½œä¸€ä¸ªåˆçº¦æ¥å¤„ç†ï¼Œè¿™æ ·æˆ‘æ‰èƒ½è°ƒç”¨å®ƒçš„å‡½æ•°ã€‚â€
> 

è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º**åœ°å€å¼ºåˆ¶ç±»å‹è½¬æ¢** â€”â€”ä½ å°†ä¸€ä¸ªåœ°å€è½¬æ¢ä¸ºä¸€ä¸ªåˆçº¦å¼•ç”¨ï¼Œä»¥ä¾¿ç›´æ¥ä¸ä¹‹äº¤äº’ã€‚

è€Œä¸”è¿™ä¹‹æ‰€ä»¥èƒ½å·¥ä½œ**ä»…ä»…å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨æ–‡ä»¶é¡¶éƒ¨å¯¼å…¥äº† `ScientificCalculator.sol`**ã€‚Solidity ç°åœ¨çŸ¥é“äº†é‚£ä¸ªåˆçº¦çš„ç»“æ„ï¼Œæ‰€ä»¥å®ƒå…è®¸æˆ‘ä»¬å®‰å…¨åœ°è°ƒç”¨å®ƒçš„å‡½æ•°ã€‚

### **ç¬¬äºŒæ­¥ï¼šè°ƒç”¨å‡½æ•°**

```solidity
uint256 result = scientificCalc.power(base, exponent);
```

ç°åœ¨æˆ‘ä»¬æœ‰äº†åˆçº¦å¼•ç”¨ï¼Œè°ƒç”¨å®ƒçš„å‡½æ•°å’Œç‚¹è¡¨ç¤ºæ³•ä¸€æ ·ç®€å•â€”â€”å°±åƒåœ¨ä»»ä½•é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­è°ƒç”¨æ–¹æ³•ä¸€æ ·ã€‚

è¿™å‘éƒ¨ç½²çš„ `ScientificCalculator` åˆçº¦å‘é€ä¸€ä¸ªåªè¯»è°ƒç”¨ï¼Œè¦æ±‚å®ƒè®¡ç®— `base ** exponent`ï¼Œç„¶åè¿”å›ç»“æœã€‚

### **ç¬¬ä¸‰æ­¥ï¼šè¿”å›ç»“æœ**

```solidity
return result;
```

æˆ‘ä»¬ç›´æ¥è¿”å›è¯¥å€¼ï¼Œä»¥ä¾¿ç”¨æˆ·è·å¾—ä»–ä»¬è®¡ç®—çš„ç»“æœã€‚

---

### **ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•æœ‰æ•ˆ**

è¿™æ˜¯è°ƒç”¨å¦ä¸€ä¸ªåˆçº¦çš„**é«˜å±‚ã€ç±»å‹å®‰å…¨**æ–¹å¼ï¼š

- æ˜“äºé˜…è¯»å’Œä¹¦å†™
- éœ€è¦ä½ å·²ç»å¯¼å…¥äº†å¤–éƒ¨åˆçº¦çš„ä»£ç 
- å®ƒå…è®¸ç¼–è¯‘å™¨æ•è·é”™è¯¯â€”â€”æ¯”å¦‚è°ƒç”¨ä¸å­˜åœ¨çš„å‡½æ•°

å½“ä½  **çŸ¥é“å…¶ä»–åˆçº¦çš„ç»“æ„** å¹¶èƒ½è®¿é—®å…¶æºä»£ç æ—¶ï¼Œè¿™æ˜¯æ¨èçš„æ–¹æ³•ã€‚

---

## **é¢å¤–ç¦åˆ©ï¼šä½¿ç”¨ä½çº§è°ƒç”¨**

æœ‰æ—¶ï¼Œä½ å¸Œæœ›ä¸å¦ä¸€ä¸ªåˆçº¦  **ä¸å¯¼å…¥å…¶æºä»£ç **  è¿›è¡Œäº¤äº’â€”â€”ä¹Ÿè®¸ä½ åªçŸ¥é“ä½ æƒ³è°ƒç”¨çš„å‡½æ•°çš„åœ°å€å’Œåç§°ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨  **ä½çº§è°ƒç”¨** ã€‚å®ƒæ›´çµæ´»ï¼Œä½†ä¹Ÿæ›´å…·é£é™©ï¼Œå› ä¸º Solidity æ— æ³•åœ¨ç¼–è¯‘æ—¶ä¿æŠ¤ä½ å…å—é”™è¯¯çš„å½±å“ã€‚

è®©æˆ‘ä»¬é€šè¿‡è°ƒç”¨ `squareRoot()` å‡½æ•°æ¥æŸ¥çœ‹å®é™…æ“ä½œï¼Œè¯¥å‡½æ•°æ¥è‡ª `ScientificCalculator` åˆçº¦  **è€Œä¸ä½¿ç”¨ç›´æ¥å¯¼å…¥** ã€‚

### **`calculateSquareRoot(number)`**

```solidity
function calculateSquareRoot(uint256 number) public returns (uint256) {
    require(number >= 0, "Cannot calculate square root of negative number");

    bytes memory data = abi.encodeWithSignature("squareRoot(int256)", number);
    (bool success, bytes memory returnData) = scientificCalculatorAddress.call(data);
    require(success, "External call failed");

    uint256 result = abi.decode(returnData, (uint256));
    return result;
}
```

è®©æˆ‘ä»¬é€è¡Œåˆ†æã€‚

### **æ­¥éª¤1ï¼šè¾“å…¥éªŒè¯**

```solidity
require(number >= 0, "Cannot calculate square root of negative number");
```

æˆ‘ä»¬é¦–å…ˆç¡®ä¿æ•°å­—ä¸æ˜¯è´Ÿæ•°ã€‚Solidity ä¸æ”¯æŒè™šæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ä¸€å¼€å§‹å°±æ‹’ç»è´Ÿæ•°è¾“å…¥ã€‚

---

### **æ­¥éª¤2ï¼šç¼–ç å‡½æ•°è°ƒç”¨**

```solidity
bytes memory data = abi.encodeWithSignature("squareRoot(int256)", number);
```

è¿™æ˜¯**åº•å±‚è°ƒç”¨çš„æ ¸å¿ƒ** ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ç§ç§°ä¸º **ABI** çš„ä¸œè¥¿æ¥å‡†å¤‡å‡½æ•°è°ƒç”¨ã€‚

---

### **ä»€ä¹ˆæ˜¯ ABIï¼Ÿ**

ABI ä»£è¡¨**åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£** ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯åˆåŒçš„"é€šä¿¡åè®®"â€”â€”å®ƒå®šä¹‰äº†å½“ä¸€æ–¹åˆåŒè°ƒç”¨å¦ä¸€æ–¹æ—¶æ•°æ®å¿…é¡»å¦‚ä½•ç»“æ„åŒ–ã€‚

åœ¨ä½¿ç”¨é«˜çº§å‡½æ•°è°ƒç”¨ï¼ˆå¦‚ `otherContract.someFunction()`ï¼‰æ—¶ï¼ŒSolidity ä¼šä¸ºä½ å¤„ç† ABI ç¼–ç ã€‚ä½†ä½¿ç”¨ä½çº§è°ƒç”¨æ—¶ï¼Œ **ä½ å¿…é¡»æ‰‹åŠ¨å¤„ç†** ã€‚

### **`abi.encodeWithSignature` æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ**

å®ƒæ„å»ºäº† EVM åœ¨è°ƒç”¨ç‰¹å®šå‡½æ•°æ—¶æœŸæœ›çš„ç¡®åˆ‡äºŒè¿›åˆ¶æ ¼å¼ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼š

```solidity
abi.encodeWithSignature("squareRoot(int256)", number)
```

- `"squareRoot(int256)"` æ˜¯å®Œæ•´çš„å‡½æ•°ç­¾åï¼ˆåç§°+å‚æ•°ç±»å‹ï¼‰ã€‚
- `number` æ˜¯æˆ‘ä»¬ä½œä¸ºå‚æ•°ä¼ é€’çš„å€¼ã€‚
- ç»“æœæ˜¯å­—èŠ‚æ•°ç»„ (`bytes memory`)ï¼Œå…¶ä¸­åŒ…å«åœ¨åŒºå—é“¾ä¸Šè°ƒç”¨è¯¥å‡½æ•°æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚

---

### **æ­¥éª¤ 3ï¼šè¿›è¡Œä½çº§è°ƒç”¨**

```solidity
(bool success, bytes memory returnData) = scientificCalculatorAddress.call(data);
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‘Šè¯‰ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰ï¼š

> â€œå˜¿ï¼Œå°†æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç¼–ç æ•°æ®é€šè¿‡è¿™ä¸ªåœ°å€å‘é€ä¸€ä¸ªåŸå§‹è°ƒç”¨ã€‚â€
> 
- `.call(data)` å°†è¿™äº›æ•°æ®å‘é€åˆ°å­˜å‚¨åœ¨ `scientificCalculatorAddress` ä¸­çš„åœ°å€ã€‚
- å®ƒè¿”å›ä¸¤ä»¶äº‹ï¼š
    - `success`ï¼ˆä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå‘Šè¯‰æˆ‘ä»¬è°ƒç”¨æ˜¯å¦æˆåŠŸï¼‰
    - `returnData`ï¼ˆä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼ŒåŒ…å«å‡½æ•°è¿”å›çš„å†…å®¹ï¼‰

> è¿™å°±åƒé€šè¿‡åé—¨æ‰‹åŠ¨è°ƒç”¨å‡½æ•°ä¸€æ ·â€”â€”ä½ éœ€è¦ç¡®ä¿ä¸€åˆ‡å®Œå…¨æ­£ç¡®ã€‚
> 

[ğŸ”§](data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)

### **æ­¥éª¤4ï¼šæ£€æŸ¥è°ƒç”¨æ˜¯å¦æˆåŠŸ**

```solidity
require(success, "External call failed");
```

å§‹ç»ˆæ£€æŸ¥é€šè¯æ˜¯å¦æˆåŠŸã€‚å¦‚æœå‡ºç°é”™è¯¯ï¼ˆç­¾åé”™è¯¯ã€åœ°å€é”™è¯¯ã€å‡½æ•°æœªæ‰¾åˆ°ç­‰ï¼‰ï¼Œ `success`å°†ä¸ºå‡â€”â€”æˆ‘ä»¬å°†åœæ­¢æ‰§è¡Œå¹¶æ˜¾ç¤ºä¸€æ¡æœ‰ç”¨çš„é”™è¯¯æ¶ˆæ¯ã€‚

---

### **æ­¥éª¤5ï¼šè§£ç å“åº”**

```solidity
uint256 result = abi.decode(returnData, (uint256));
```

ç°åœ¨æˆ‘ä»¬å°†åŸå§‹è¿”å›æ•°æ®è§£ç å›å¯ç”¨å€¼ â€” åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ˜¯ä¸€ä¸ª `uint256`ã€‚

æ—¢ç„¶æˆ‘ä»¬çŸ¥é“ `squareRoot()` çš„è¿”å›ç±»å‹æ˜¯ `int256`ï¼ˆè€Œæˆ‘ä»¬è¿™é‡Œè¿”å›çš„æ˜¯ `uint256`ï¼‰ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®ä½ å¦‚ä½•å¤„ç†æœ‰ç¬¦å·å€¼æ¥è°ƒæ•´è¿™ä¸€ç‚¹ã€‚ä¸ºç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾ä¼ å…¥çš„æ•°å­—æ˜¯å®‰å…¨çš„ä¸”ä¸ºæ­£æ•°ã€‚

### **æ­¥éª¤6ï¼šè¿”å›æœ€ç»ˆç»“æœ**

```solidity
return result;
```

æœ€åï¼Œæˆ‘ä»¬å°†å¹³æ–¹æ ¹è®¡ç®—çš„ç»“æœè¿”å›ç»™è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„äººã€‚

## **æ€»ç»“**

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»æ„å»ºäº†ä¸¤ä¸ªåˆçº¦ï¼š

- å°†é€»è¾‘åŒºåˆ†ä¸ºåŸºç¡€æ•°å­¦å’Œé«˜çº§æ•°å­¦
- ä½¿ç”¨**é«˜çº§è°ƒç”¨**å’Œ**ä½çº§è°ƒç”¨**ç›¸äº’äº¤æµ
- å±•ç¤ºå¦‚ä½•**æ¨¡å—åŒ–é€»è¾‘**å¹¶ä¿æŒæ¡ç†æ¸…æ™°
- æ¼”ç¤ºå¦‚è®¿é—®æ§åˆ¶å’Œé”™è¯¯æ£€æŸ¥ç­‰å®‰å…¨å®è·µ

è¿™äº›æ˜¯æ„å»ºå¹²å‡€ã€å¯ç»´æŠ¤å’Œå¯æ‰©å±•çš„çœŸå®ä¸–ç•Œå»ä¸­å¿ƒåŒ–åº”ç”¨çš„åŸºæœ¬æ¨¡å¼ã€‚